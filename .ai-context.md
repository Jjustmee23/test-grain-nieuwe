# AI Context - Mill React Application

## ğŸ¯ **PROJECT OVERVIEW**
**Mill Management System** - Een uitgebreide IoT applicatie voor het monitoren van graanmolens met UC300 devices, real-time data verwerking, en een moderne web interface.

## ğŸ—ï¸ **ARCHITECTUUR**

### **Frontend (React 18 + TypeScript)**
- **Framework**: React 18 met TypeScript
- **UI Library**: Material-UI v5
- **State Management**: Redux Toolkit
- **Routing**: React Router v6
- **Notifications**: notistack
- **WebSocket**: socket.io-client
- **Container**: Nginx Alpine

### **Backend (Node.js 18 + Express)**
- **Runtime**: Node.js 18 Alpine
- **Framework**: Express met TypeScript
- **Database ORM**: Prisma
- **Authentication**: JWT
- **Real-time**: Socket.io
- **MQTT**: MQTT.js voor UC300 devices
- **Cache**: Redis
- **Logging**: Winston
- **Security**: helmet, compression, rate-limit

### **Database**
- **Primary**: PostgreSQL 15 Alpine
- **Cache**: Redis 7 Alpine
- **Tables**: 
  - `uc300_official_data` (MQTT data)
  - `mill_management` (applicatie data)
- **Persistence**: Docker volumes

### **Infrastructure**
- **Reverse Proxy**: Traefik v2.10
- **Monitoring**: Grafana 10.2.0
- **Metrics**: Prometheus
- **Backup**: Automated PostgreSQL backups
- **SSL**: Let's Encrypt (via Traefik)

## ğŸ”§ **CURRENT SETUP**

### **Docker Compose Files**
- `docker-compose.production.yml` - Volledige productie setup
- `docker-compose.traefik-local.yml` - Lokale testing met Traefik

### **Services Status** âœ…
- **PostgreSQL**: âœ… Draait (399 UC300 berichten opgeslagen)
- **Redis**: âœ… Draait en gezond
- **Backend API**: âœ… Draait en gezond
- **MQTT Client**: âœ… Draait (real-time UC300 data)
- **Traefik**: âœ… Draait (dashboard: 8081)
- **Grafana**: âœ… Draait en gezond
- **Frontend**: ğŸ”„ Aan het builden

### **MQTT Configuration**
- **Broker**: 45.154.238.114:1883
- **Username**: uc300
- **Password**: grain300
- **Devices**: 3 UC300 devices actief
- **Performance**: ~0.7 msg/s
- **Data**: 399 berichten in database

## ğŸ“ **PROJECT STRUCTURE**
```
mill-react-application/
â”œâ”€â”€ backend/                 # Node.js API server
â”œâ”€â”€ frontend/               # React application
â”œâ”€â”€ mqtt-client/           # UC300 MQTT client
â”œâ”€â”€ shared/                # Shared TypeScript types
â”œâ”€â”€ docs/                  # Documentation
â”œâ”€â”€ backup/                # Backup scripts
â”œâ”€â”€ grafana/               # Grafana configuration
â”œâ”€â”€ prometheus/            # Prometheus configuration
â”œâ”€â”€ traefik/               # Traefik configuration
â”œâ”€â”€ .github/               # GitHub Actions
â”œâ”€â”€ docker-compose.production.yml
â”œâ”€â”€ docker-compose.traefik-local.yml
â”œâ”€â”€ .env.production
â”œâ”€â”€ deploy-production.sh
â”œâ”€â”€ server-setup.sh
â””â”€â”€ README.md
```

## ğŸ¯ **KEY FEATURES**
1. **Real-time UC300 Monitoring** - Live data van graanmolen devices
2. **Factory Management** - CRUD operaties voor fabrieken
3. **Device Monitoring** - IoT device status en data
4. **Batch Processing** - Productie batch management
5. **Power Management** - Energie monitoring
6. **Analytics** - Productie analytics en rapporten
7. **User Management** - JWT authentication met RBAC
8. **Notifications** - Real-time notificaties
9. **Support System** - Klantondersteuning
10. **Monitoring** - Grafana dashboards

## ğŸ” **SECURITY**
- JWT authentication
- Role-based access control
- Rate limiting
- Security headers (helmet)
- Input validation
- SQL injection protection (Prisma)

## ğŸ“Š **MONITORING**
- **Grafana**: Dashboards voor alle services
- **Prometheus**: Metrics collection
- **Health Checks**: Alle services
- **Logging**: Winston structured logging
- **Backup**: Automated PostgreSQL backups

## ğŸš€ **DEPLOYMENT**
- **Local**: `docker-compose.traefik-local.yml`
- **Production**: `docker-compose.production.yml`
- **Server**: Ubuntu met Docker
- **Domain**: test.nexonsolutions.be
- **SSL**: Let's Encrypt via Traefik

## ğŸ“ˆ **PERFORMANCE**
- **MQTT**: 300+ devices support
- **Database**: Connection pooling
- **Caching**: Redis voor sessies
- **Load Balancing**: Traefik
- **Resource Limits**: Docker Compose

## ğŸ”„ **DEVELOPMENT WORKFLOW**
1. Local development met Traefik setup
2. Testing met echte UC300 data
3. Production deployment via GitHub Actions
4. Automated backups en monitoring

## ğŸ“ **NOTES**
- Alle UC300 data wordt opgeslagen in PostgreSQL
- Real-time updates via WebSocket
- MQTT client decodeert officiÃ«le Milesight protocol
- Traefik zorgt voor SSL en routing
- Grafana dashboards voor monitoring

---
*Laatst bijgewerkt: 2025-08-01*
*Status: Alle core services draaien, frontend in build* 