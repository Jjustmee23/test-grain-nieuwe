<!DOCTYPE html>
<html>
<head>
    <title>Test Batch Delete</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Test Batch Delete</h1>
    <button onclick="testDelete()">Test Delete Batch 6</button>
    
    <script>
    function testDelete() {
        console.log('üß™ Testing batch delete...');
        
        $.post('/batches/6/delete/', {
            csrfmiddlewaretoken: '{{ csrf_token }}'
        })
        .done(function(response) {
            console.log('üì• Response:', response);
            if (response.success) {
                alert('‚úÖ Delete successful!');
            } else {
                if (response.can_force_delete) {
                    if (confirm('This batch is protected. Force delete?')) {
                        $.post('/batches/6/delete/', {
                            csrfmiddlewaretoken: '{{ csrf_token }}',
                            force_delete: 'true'
                        })
                        .done(function(forceResponse) {
                            console.log('üì• Force response:', forceResponse);
                            if (forceResponse.success) {
                                alert('‚úÖ Force delete successful!');
                            } else {
                                alert('‚ùå Force delete failed: ' + forceResponse.error);
                            }
                        })
                        .fail(function(xhr, status, error) {
                            console.error('‚ùå Force delete error:', error);
                            alert('‚ùå Force delete error: ' + error);
                        });
                    }
                } else {
                    alert('‚ùå Delete failed: ' + response.error);
                }
            }
        })
        .fail(function(xhr, status, error) {
            console.error('‚ùå Delete error:', error);
            console.error('‚ùå Status:', status);
            console.error('‚ùå Response:', xhr.responseText);
            alert('‚ùå Delete error: ' + error);
        });
    }
    </script>
</body>
</html> 