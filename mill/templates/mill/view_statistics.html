
{% extends 'mill/base.html' %}
{% load static %}
{% load i18n %}
{% block title %}Mill Statistics{% endblock %}

{% block content %}
    {% comment %} <div class="header d-flex justify-content-between align-items-center p-3 bg-light">
        <img src="{{ url_for('static', filename='pictures/logo-left.png') }}" alt="Logo Left" class="logo-left" style="height: 50px;">
        <div class="text-center">
            <h1>{{ factory_name }}</h1>
            <h2>إحصائيات</h2>
        </div>
        <img src="{{ url_for('static', filename='pictures/logo-right.png') }}" alt="Logo Right" class="logo-right" style="height: 50px;">
    </div> {% endcomment %}

    <div class="container my-4">
        <div class="row mb-4">
            <div class="col-md-4">
                <input type="date" id="datePicker" class="form-control" onchange="refreshCharts()" value="{{ selected_date|date:"Y-m-d" }}" />
            </div>
            <div class="col-md-2">
                <button id="backToDashboard" class="btn btn-primary" onclick="window.location.href='/';">العودة إلى لوحة التحكم</button>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card text-white bg-success mb-3">
                    <div class="card-header">إجمالي يومي</div>
                    <div class="card-body">
                        <h5 class="card-title" id="total-daily">{{ factory.daily_total }}</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-white bg-secondary mb-3">
                    <div class="card-header">إجمالي أسبوعي</div>
                    <div class="card-body">
                        <h5 class="card-title" id="total-week">{{ factory.weekly_total }}</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-white bg-info mb-3">
                    <div class="card-header">إجمالي شهري</div>
                    <div class="card-body">
                        <h5 class="card-title" id="total-month">{{ factory.monthly_total }}</h5>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card text-white bg-warning mb-3">
                    <div class="card-header">إجمالي سنوي حالي</div>
                    <div class="card-body">
                        <h5 class="card-title" id="total-year">{{ factory.yearly_total }}</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-white bg-danger mb-3">
                    <div class="card-header">إجمالي سنوي سابق</div>
                    <div class="card-body">
                        <h5 class="card-title" id="total-previous">{{ yearly_previous }}</h5>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="chart-box">
                    <h3>إنتاج يومي</h3>
                    <canvas id="dailyChart"></canvas>
                </div>
            </div>
            <div class="col-md-6">
                <div class="chart-box">
                    <h3>إنتاج شهري</h3>
                    <canvas id="monthlyChart"></canvas>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="chart-box">
                    <h3>إنتاج سنوي</h3>
                    <canvas id="yearlyChart"></canvas>
                </div>
            </div>
        </div>
    </div>
    <input id="factoryId" hidden value={{factory.id}}>{{ factory.id }}</input>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'js/view_statistics.js' %}"></script>
    {% endblock %}